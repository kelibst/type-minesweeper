(()=>{"use strict";const t=(t,s,e)=>{for(let n=0;n<t.length;n++)if(t[n].classList.contains("flag")&&t[n].classList.contains("bomb")&&s++,s===e){let t=document.querySelector(".status");t.classList.add("success"),t.innerHTML="Wow! you won. Restarting Game!",setTimeout((()=>{location.reload()}),5e3)}},s=(s,e,n,i,c,a)=>{e||!s.classList.contains("checked")&&n<i&&(s.classList.contains("flag")?(s.classList.remove("flag"),s.innerHTML="",n--,t(a,c,i)):(s.classList.add("flag"),s.innerHTML="&#9971",n++,t(a,c,i)))},e=(t,s,n,i)=>{let c=parseInt(t.id);if(!i&&!t.classList.contains("flag")&&!t.classList.contains("bomb")){let a=Number(t.getAttribute("data"));return 0!==a?(t.classList.add("checked"),void(t.innerHTML=`${a}`)):(t.classList.add("checked"),void((t,s,n,i,c)=>{const a=c%i==0,o=c%i==i-1;setTimeout((()=>{if(c>0&&!a){const n=t[c-1].id,a=document.getElementById(n);e(a,t,i,s)}if(c>9&&!o){const n=t[c+1-i].id,a=document.getElementById(n);e(a,t,i,s)}if(c>10){const n=t[c-i].id,a=document.getElementById(n);e(a,t,i,s)}if(c>11&&!a){const n=t[c-1-i].id,a=document.getElementById(n);e(a,t,i,s)}if(c<98&&!o){const n=t[c+1].id,a=document.getElementById(n);e(a,t,i,s)}if(c<90&&!a){const n=t[c-1+i].id,a=document.getElementById(n);e(a,t,i,s)}if(c<88&&!o){const n=t[c+1+i].id,a=document.getElementById(n);e(a,t,i,s)}if(c<89){const n=t[c+i].id,a=document.getElementById(n);e(a,t,i,s)}}),10)})(s,i,0,n,c))}},n=(t,s)=>{for(let e=0;e<s.length;e++){let n=0;const i=e%t==0,c=e%t==0;s[e].classList.contains("valid")&&(e>0&&!i&&s[e-1].classList.contains("bomb")&&n++,e>9&&!c&&s[e+1-t].classList.contains("bomb")&&n++,e>10&&s[e-t].classList.contains("bomb")&&n++,e>11&&!i&&s[e-1-t].classList.contains("bomb")&&n++,e<98&&!c&&s[e+1].classList.contains("bomb")&&n++,e<90&&!i&&s[e-1+t].classList.contains("bomb")&&n++,e<88&&!c&&s[e+1+t].classList.contains("bomb")&&n++,e<89&&s[e+t].classList.contains("bomb")&&n++,s[e].setAttribute("data",n))}};document.addEventListener("DOMContentLoaded",(()=>{let t;t=[10,document.querySelector(".grid"),[],20,!1,0,0],((t,i,c,a,o,d,l)=>{const m=Array.from({length:a},(t=>"bomb")),r=[...Array(t*t-a).fill("valid"),...m].sort((()=>Math.random()-.5));let L=document.querySelector(".flag-add");L.addEventListener("click",(()=>{L.classList.contains("active")?L.classList.remove("active"):L.classList.add("active")}));for(let m=0;m<t*t;m++){const u=document.createElement("div");let b;u.setAttribute("id",`${m}`),u.classList.add(r[m]),i.appendChild(u),c.push(u),b=[u,o,d,a,l,c],u.addEventListener("click",(n=>L.classList.contains("active")?s(...b):e(u,c,t,o))),n(t,c)}})(...t)}))})();